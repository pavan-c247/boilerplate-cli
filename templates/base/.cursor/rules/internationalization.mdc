# Internationalization Standards

## i18n Stack
- **next-intl**: Primary internationalization library (v4.1.0)
- **Locale files**: JSON-based translation files organized by feature
- **Middleware**: Next.js middleware for locale detection and routing

## Locale File Structure

Organize translations by feature in `locales/en/`:

```
locales/
├── en/
│   ├── auth/
│   │   └── index.json          # Authentication translations
│   ├── users/
│   │   └── index.json          # User management translations
│   ├── cms/
│   │   └── index.json          # CMS translations
│   ├── common/
│   │   └── index.json          # Common UI elements
│   ├── dashboard/
│   │   └── index.json          # Dashboard translations
│   ├── faq/
│   │   └── index.json          # FAQ translations
│   ├── header/
│   │   └── header.json         # Header translations
│   ├── sidebar/
│   │   └── index.json          # Sidebar translations
│   └── listing/
│       └── index.json          # Listing translations
├── index.ts                     # Locale configuration
└── [other locales]/
    └── [same structure]
```

## Translation File Pattern

Each feature has its own JSON file with nested structure:

```json
// locales/en/users/index.json
{
  "title": "User Management",
  "createUser": "Create User",
  "searchPlaceholder": "Search users...",
  "name": "Name",
  "email": "Email",
  "status": "Status",
  "createdAt": "Created At",
  "updatedAt": "Updated At",
  "statusOptions": {
    "active": "Active",
    "inactive": "Inactive"
  },
  "role": "Role",
  "actions": "Actions",
  "view": "View",
  "edit": "Edit",
  "delete": "Delete",
  "noUsers": "No users found",
  "noData": "No data found",
  "confirmDelete": "Are you sure you want to delete this user?",
  "confirmText": "Are you sure you want to proceed?",
  "userDetails": "User Details",
  "save": "Save",
  "update": "Update",
  "cancel": "Cancel",
  "createNewUser": "Create New User",
  "editUser": "Edit User",
  "roles": {
    "admin": "Admin",
    "user": "User"
  },
  "form": {
    "nameRequired": "Name is required",
    "emailRequired": "Email is required",
    "statusRequired": "Status is required"
  },
  "messages": {
    "userCreated": "User created successfully",
    "userUpdated": "User updated successfully",
    "userDeleted": "User deleted successfully",
    "error": "An error occurred. Please try again."
  }
}
```

## Component Usage Pattern

Use `useTranslations` hook from `next-intl`:

```typescript
import { useTranslations } from 'next-intl';
import { Button } from '@/components/pure-components/Button';

const MyComponent: React.FC = () => {
  const t = useTranslations('users'); // Use feature namespace

  return (
    <div>
      <h1>{t('title')}</h1>
      <Button variant="primary">
        {t('save')}
      </Button>
      <p>{t('messages.userCreated')}</p>
      
      {/* Nested keys */}
      <select>
        <option value="active">{t('statusOptions.active')}</option>
        <option value="inactive">{t('statusOptions.inactive')}</option>
      </select>
    </div>
  );
};
```

## Form Validation with i18n

Use translations for validation messages in React Hook Form:

```typescript
import { useTranslations } from 'next-intl';
import { useForm } from 'react-hook-form';
import Input from '@/components/pure-components/Form/Input';

const UserForm: React.FC = () => {
  const t = useTranslations('users');
  const { register, formState: { errors } } = useForm();

  return (
    <form>
      <Input
        {...register('name', { 
          required: t('form.nameRequired') 
        })}
        isInvalid={!!errors.name}
        feedback={errors.name?.message}
      />
      
      <Input
        {...register('email', {
          required: t('form.emailRequired'),
          pattern: {
            value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,
            message: t('form.emailInvalid'),
          },
        })}
        isInvalid={!!errors.email}
        feedback={errors.email?.message}
      />
    </form>
  );
};
```

## Date and Number Formatting

Use `useFormatter` hook from `next-intl` for formatting:

```typescript
import { useFormatter } from 'next-intl';

const DateComponent: React.FC = () => {
  const format = useFormatter();
  const date = new Date();
  const number = 1234.56;

  return (
    <div>
      {/* Date formatting */}
      <p>{format.dateTime(date, { dateStyle: 'long' })}</p>
      <p>{format.dateTime(date, { dateStyle: 'short', timeStyle: 'short' })}</p>
      
      {/* Number formatting */}
      <p>{format.number(number)}</p>
      <p>{format.number(number, { style: 'currency', currency: 'USD' })}</p>
      <p>{format.number(number, { style: 'percent' })}</p>
    </div>
  );
};
```

## Next.js Configuration

The project uses `next-intl` with middleware for locale routing:

```typescript
// middleware.ts
import createMiddleware from 'next-intl/middleware';

export default createMiddleware({
  locales: ['en'], // Add more locales as needed
  defaultLocale: 'en',
});

export const config = {
  matcher: ['/((?!api|_next|.*\\..*).*)'],
};
```

## Locale Configuration

Locale files are configured in `locales/index.ts`:

```typescript
// locales/index.ts
export const locales = ['en'] as const;
export type Locale = (typeof locales)[number];
```

## Translation Key Naming Conventions

- **Feature namespace**: Use feature name (e.g., `users`, `cms`, `auth`)
- **Flat keys**: Use for simple labels (e.g., `name`, `email`, `save`)
- **Nested keys**: Use for grouped content (e.g., `form.nameRequired`, `statusOptions.active`)
- **Messages**: Group success/error messages under `messages` key
- **Form validation**: Group validation messages under `form` key

## Best Practices

### Organization
- **Feature-based**: Organize translations by feature/domain
- **Consistent structure**: Use similar structure across features
- **Nested grouping**: Group related translations (e.g., `statusOptions`, `form`, `messages`)

### Key Naming
- **Descriptive**: Use clear, descriptive keys
- **Consistent**: Use consistent naming patterns across features
- **Hierarchical**: Use dot notation for nested keys

### Usage
- **Namespace**: Always specify the feature namespace in `useTranslations('featureName')`
- **Reuse**: Reuse common translations from `common` namespace when appropriate
- **Type safety**: Consider using TypeScript for translation keys (future enhancement)

### Example Structure
```typescript
// Component using translations
import { useTranslations } from 'next-intl';

const UsersPage: React.FC = () => {
  const t = useTranslations('users');
  const tCommon = useTranslations('common'); // For shared translations

  return (
    <div>
      <h1>{t('title')}</h1>
      <Button>{t('save')}</Button>
      <Button>{tCommon('cancel')}</Button>
    </div>
  );
};
```

## Accessibility

- **Language attributes**: Next.js and next-intl handle `lang` attributes automatically
- **Direction**: Support RTL languages when needed (configure in middleware)
- **Screen readers**: Ensure translated content is properly announced
- **Cultural considerations**: Adapt content for different cultures (dates, numbers, etc.)

## Adding New Translations

1. **Create/Update JSON file**: Add or update the feature's JSON file in `locales/en/[feature]/index.json`
2. **Use in component**: Import and use `useTranslations('featureName')`
3. **Nested keys**: Use dot notation for nested keys (e.g., `t('form.nameRequired')`)

Example:
```typescript
// 1. Add to locales/en/users/index.json
{
  "newKey": "New Translation",
  "nested": {
    "key": "Nested Translation"
  }
}

// 2. Use in component
const t = useTranslations('users');
<p>{t('newKey')}</p>
<p>{t('nested.key')}</p>
```
description:
globs:
alwaysApply: false
---
